<div id="events-header">
  <h2>
    <span class="program-name">
      {{#if programFilter}}
        {{programFilter.name}}
      {{else}}
        All
      {{/if}}
    </span>

    {{#if isViewingPast}}
      Past Events
    {{else}}
      Upcoming Events
    {{/if}}
  </h2>

  <div class="controls">
    {{#link-to 'events.new' id="add-event"}}
      Add event
    {{/link-to}}

    <a id="change-filter" {{action 'toggleFilter'}}>
      {{#if isChangingFilter}}
        Cancel Change Filter
      {{else}}
        Change Filter
      {{/if}}
    </a>
  </div>
</div>

{{#if isChangingFilter}}
  <div id="events-filter">
    {{#if isViewingPast}}
      {{#link-to 'events' programFilterSlug 'upcoming' id="filter-status"}}
        View Upcoming Events
      {{/link-to}}
    {{else}}
      {{#link-to 'events' programFilterSlug 'past' id="filter-status"}}
        Past Events
      {{/link-to}}
    {{/if}}

    {{view 'select'
      id="select-program"
      class="form-control"
      content=programFilterOptions
      optionValuePath="content.slug"
      optionLabelPath="content.name"
      selection=selectProgramFilter
      prompt="Filter by program..."}}
  </div>
{{/if}}

<div id="events">
  {{outlet}}

  <div id="events-list">
    {{#each eventDay in eventDays}}
      <h4 class="event-date">{{format-day eventDay.date}}</h4>
      <ul class="list-unstyled">
      {{#each event in eventDay.events }}
        <li class="event">
          {{#link-to 'event' event}}
            <span class="time">{{format-time event.startsAt}}</span>
            <span class="name">{{event.name}}</span>
            {{#if event.location }}
              <span class="location">at {{event.location}}</span>
            {{/if}}
            {{#if event.program }}
              <span class="program">{{event.program.name}}</span>
            {{/if}}
          {{/link-to}}
        </li>
      {{/each}}
      </ul>
    {{/each}}
  </div>
</div>